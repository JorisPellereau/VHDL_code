//
// Scenario MAX_CONTROLLER_00
// Test of MAX7219 Display Controler
//
//
// Aim of test : Check the configuration phase
//

//--
//-- START of TEST
//--

WTR RST_N
WAIT 100 ns

//-- STEP 0
//-- == INIT MEMORY STATIC ==

SET I_ME_STATIC 1
SET I_WE_STATIC 1

WTFS CLK

SET I_ADDR_STATIC 0
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x001
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x002
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x003
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x004
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x005
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x006
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x007
SET I_WDATA_STATIC 0x1900

WTFS CLK

SET I_ME_STATIC 0
SET I_WE_STATIC 0

//-- == INIT MEMORY SCROLLER ==

SET I_ME_SCROLLER 1
SET I_WE_SCROLLER 1

WTFS CLK

SET I_ADDR_SCROLLER 0
SET I_WDATA_SCROLLER 0xAA

WTFS CLK

SET I_ADDR_SCROLLER 0x001
SET I_WDATA_SCROLLER 0xBB

WTFS CLK

SET I_ADDR_SCROLLER 0x002
SET I_WDATA_SCROLLER 0xCC

WTFS CLK

SET I_ADDR_SCROLLER 0x003
SET I_WDATA_SCROLLER 0xDD

WTFS CLK

SET I_ADDR_SCROLLER 0x004
SET I_WDATA_SCROLLER 0xEE

WTFS CLK

SET I_ADDR_SCROLLER 0x005
SET I_WDATA_SCROLLER 0xFF

WTFS CLK

SET I_ADDR_SCROLLER 0x006
SET I_WDATA_SCROLLER 0x11

WTFS CLK

SET I_ADDR_SCROLLER 0x007
SET I_WDATA_SCROLLER 0x22

WTFS CLK

SET I_ME_SCROLLER 0
SET I_WE_SCROLLER 0


WTR O_CONFIG_DONE 2 ms


//-- STEP 1
//-- Set a new config

WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0

WTR O_CONFIG_DONE 2 ms


//-- STEP 2
//-- Set a new config

WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0

WTR O_CONFIG_DONE 2 ms


//-- STEP3
//-- Wait and Fill the Fifo with CONFIG Command


WAIT 100 us

WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0
WTFS CLK

SET I_NEW_CONFIG_VAL 1

WTFS CLK

SET I_NEW_CONFIG_VAL 0

WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms
WTR O_CONFIG_DONE 2 ms


WAIT 400 us

//-- STEP 4
//-- Set a new STATIC display

WTFS CLK

SET I_EN_STATIC 1

WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x002
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0

//WTR O_CONFIG_DONE 2 ms

WTR O_PTR_EQUALITY_STATIC

END_TEST
