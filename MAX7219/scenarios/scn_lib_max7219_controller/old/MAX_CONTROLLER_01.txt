//
// Scenario MAX_CONTROLLER_01
// Test of MAX7219 Display Controler
//
//
// Aim of test : Check the configuration and static generation
//



// STEP 0

WTR RST_N
WAIT 100 ns

// == INIT MEMORY STATIC ==

SET I_ME_STATIC 1
SET I_WE_STATIC 1

WTFS CLK

SET I_ADDR_STATIC 0
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x001
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x002
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x003
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x004
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x005
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x006
SET I_WDATA_STATIC 0x0900

WTFS CLK

SET I_ADDR_STATIC 0x007
SET I_WDATA_STATIC 0x1900

WTFS CLK

SET I_ME_STATIC 0
SET I_WE_STATIC 0


WTR O_CONFIG_DONE

WAIT 100 us

// STEP 1


WTFS CLK

SET I_EN_STATIC 1

WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0

WTR O_PTR_EQUALITY_STATIC


WAIT 100 us

// STEP 2
// Send 5 STATIC command


WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0


WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
//WTR O_PTR_EQUALITY_STATIC


WAIT 200 us



// STEP 3
// SEND 10 STATIC COMMAND
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0

WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
//WTR O_PTR_EQUALITY_STATIC

WAIT 10 us


// STEP 4
// Send 5 STATIC CMD

WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0

WAIT 10 us

WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTFS CLK

SET I_START_PTR_STATIC 0x000
SET I_LAST_PTR_STATIC  0x008
SET I_NEW_DISPLAY 1

WTFS CLK

SET I_NEW_DISPLAY 0
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC
WTR O_PTR_EQUALITY_STATIC

//SET DISPLAY_SCREEN_MATRIX 1

WAIT 10 us

SET DISPLAY_SCREEN_SEL 0
//SET DISPLAY_REG_MATRIX_N 0xFF

WTFS CLK
SET DISPLAY_SCREEN_MATRIX 1

WTFS CLK
SET DISPLAY_SCREEN_MATRIX 0



WAIT 100 us

END_TEST

