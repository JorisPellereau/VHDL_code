//
// Scenario MAX_CONTROLLER_02
// Test of MAX7219 Display Controler
//
//
// Aim of test : Check the configuration and scroller generation
//


// STEP 0

WTR RST_N
WAIT 100 ns

// Display SCREEN Matrix on load
SET DISPLAY_SCREEN_SEL 1

// STEP 1 
// INIT RAM SCROLLER

WTFS CLK

SET I_ME_SCROLLER 1
SET I_WE_SCROLLER 1

WTFS CLK

SET I_ADDR_SCROLLER 0
SET I_WDATA_SCROLLER 0xAA

WTFS CLK

SET I_ADDR_SCROLLER 0x001
SET I_WDATA_SCROLLER 0xBB

WTFS CLK

SET I_ADDR_SCROLLER 0x002
SET I_WDATA_SCROLLER 0xCC

WTFS CLK

SET I_ADDR_SCROLLER 0x003
SET I_WDATA_SCROLLER 0xDD

WTFS CLK

SET I_ADDR_SCROLLER 0x004
SET I_WDATA_SCROLLER 0xEE

WTFS CLK

SET I_ADDR_SCROLLER 0x005
SET I_WDATA_SCROLLER 0xFF

WTFS CLK

SET I_ADDR_SCROLLER 0x006
SET I_WDATA_SCROLLER 0x11

WTFS CLK

SET I_ADDR_SCROLLER 0x007
SET I_WDATA_SCROLLER 0x22

WTFS CLK

SET I_ME_SCROLLER 0
SET I_WE_SCROLLER 0


WTR O_CONFIG_DONE

WAIT 100 us


// STEP 2
// INIT SCROLLER PTR

SET I_RAM_START_PTR_SCROLLER 0
SET I_MSG_LENGTH_SCROLLER 0x8
SET I_MAX_TEMPO_CNT_SCROLLER 1

WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0


WTF O_SCROLLER_BUSY
WAIT 100 us


// STEP 3
// SEND 5 SCROLLER

WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0


WTF O_SCROLLER_BUSY

WTF O_SCROLLER_BUSY

WTF O_SCROLLER_BUSY

WTF O_SCROLLER_BUSY

//WTF O_SCROLLER_BUSY

WAIT 1 ms

// STEP 4
// SEND 10 SCROLLER

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 0
WTFS CLK
SET I_NEW_DISPLAY 1
SET I_STATIC_DYN 1

WTFS CLK
SET I_NEW_DISPLAY 0

WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY
WTF O_SCROLLER_BUSY

WAIT 100 us



END_TEST
