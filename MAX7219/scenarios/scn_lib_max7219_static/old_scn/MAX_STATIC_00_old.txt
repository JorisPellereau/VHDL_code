//
// Scenario MAX_STATIC_00
// Test of MAX7219 CMD DECOD Block
//
//
// Aim of test : Configure All eight Matrix and turn on entire screen (All digit register to 0xFF value)
//
--

WTR RST_N
WAIT 100 ns

// ENABLE Function

SET EN 1

// == Init Memory with MAX7219 Configuration for 8 Matrix ==


// INIT DECODE MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x001
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x002
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x003
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x004
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x005
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x006
SET WDATA 0x0900

WTFS CLK

SET ADDR 0x007
SET WDATA 0x1900

WTFS CLK

SET ME 0
SET WE 0

// ==========

WTFS CLK

// INIT INTENSITY MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x08
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x009
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00A
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00B
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00C
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00D
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00E
SET WDATA 0x0A01

WTFS CLK

SET ADDR 0x00F
SET WDATA 0x1A01

WTFS CLK

SET ME 0
SET WE 0

// ==========



WTFS CLK

// INIT SCAN_LIMIT MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x10
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x011
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x012
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x013
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x014
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x015
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x016
SET WDATA 0x0B07

WTFS CLK

SET ADDR 0x017
SET WDATA 0x1B07

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT SHUTDOWN MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x18
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x019
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01A
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01B
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01C
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01D
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01E
SET WDATA 0x0C01

WTFS CLK

SET ADDR 0x01F
SET WDATA 0x1C01

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DISPLAY_TEST MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x20
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x021
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x022
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x023
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x024
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x025
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x026
SET WDATA 0x0F00

WTFS CLK

SET ADDR 0x027
SET WDATA 0x1F00

WTFS CLK

SET ME 0
SET WE 0

// ==========


// == SET START and STOP PTR ==

SET START_PTR 0
SET LAST_PTR 0x28

WTRS CLK
SET PTR_VAL 1
WTRS CLK
SET PTR_VAL 0

// ============================


// == Wait for the end of the transfert and Display registers

WTR PTR_EQUALITY 1 ms

SET DISPLAY_REG_MATRIX_N 0xFF
WAIT 1 us

SET DISPLAY_SCREEN_MATRIX 1
WAIT 1 us

// => Check Registers and screen in transcript

SET DISPLAY_REG_MATRIX_N 0x00
WAIT 1 us

SET DISPLAY_SCREEN_MATRIX 0
WAIT 1 us


// == Set DIGIT of All Matrix
// Start Ptr : 0x29
// Last Ptr : TBD


WTFS CLK

// INIT DIGIT_0 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x29
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02A
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02B
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02C
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02D
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02E
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x02F
SET WDATA 0x01FF

WTFS CLK

SET ADDR 0x030
SET WDATA 0x11FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DIGIT_1 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x31
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x032
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x033
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x034
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x035
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x036
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x037
SET WDATA 0x02FF

WTFS CLK

SET ADDR 0x038
SET WDATA 0x12FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DIGIT_2 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x39
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03A
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03B
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03C
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03D
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03E
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x03F
SET WDATA 0x03FF

WTFS CLK

SET ADDR 0x040
SET WDATA 0x13FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DIGIT_3 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x41
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x042
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x043
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x044
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x045
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x046
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x047
SET WDATA 0x04FF

WTFS CLK

SET ADDR 0x048
SET WDATA 0x14FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DIGIT_4 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x49
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04A
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04B
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04C
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04D
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04E
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x04F
SET WDATA 0x05FF

WTFS CLK

SET ADDR 0x050
SET WDATA 0x15FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


WTFS CLK

// INIT DIGIT_5 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x51
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x052
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x053
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x054
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x055
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x056
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x057
SET WDATA 0x06FF

WTFS CLK

SET ADDR 0x058
SET WDATA 0x16FF

WTFS CLK

SET ME 0
SET WE 0

// ==========



WTFS CLK

// INIT DIGIT_6 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x59
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05A
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05B
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05C
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05D
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05E
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x05F
SET WDATA 0x07FF

WTFS CLK

SET ADDR 0x060
SET WDATA 0x17FF

WTFS CLK

SET ME 0
SET WE 0

// ==========



WTFS CLK

// INIT DIGIT_7 MODE

SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0x61
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x062
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x063
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x064
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x065
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x066
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x067
SET WDATA 0x08FF

WTFS CLK

SET ADDR 0x068
SET WDATA 0x18FF

WTFS CLK

SET ME 0
SET WE 0

// ==========


// == SET START and STOP PTR ==

SET START_PTR 0x29
SET LAST_PTR 0x69

WTRS CLK
SET PTR_VAL 1
WTRS CLK
SET PTR_VAL 0

// ============================


// == Wait for the end of the transfert and Display registers

WTR PTR_EQUALITY 1 ms

SET DISPLAY_REG_MATRIX_N 0xFF
WAIT 1 us

SET DISPLAY_SCREEN_MATRIX 1
WAIT 1 us

// => Check Registers and screen in transcript


END_TEST


