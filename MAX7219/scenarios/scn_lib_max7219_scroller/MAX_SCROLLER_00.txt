//
// Scenario MAX_SCROLLER_00
// Test of MAX7219 SCROLLER Controler
//
//
// Aim of test : Test a simple Pattern scroller
//
--

WTR RST_N
WAIT 100 ns

// Connect EN_LOAd to Checkr MATRIX
SET DISPLAY_SCREEN_SEL 1

// Check initial value of outputs

CHK BUSY 0 OK


// INIT RAM - 5 Data
SET ME 1
SET WE 1

WTFS CLK

SET ADDR 0
SET WDATA 0xFF

WTFS CLK

SET ADDR 0x01
SET WDATA 0xFE

WTFS CLK

SET ADDR 0x02
SET WDATA 0x3F

WTFS CLK

SET ADDR 0x03
SET WDATA 0x30

WTFS CLK

SET ADDR 0x04
SET WDATA 0x30

WTFS CLK

SET ADDR 0x05
SET WDATA 0xAA

WTFS CLK

SET ME 0
SET WE 0

// ==========


// SET START RAM PTR and MESSAGE LENGTH

SET RAM_START_PTR 0
SET MSG_LENGTH 0x05
SET MAX_TEMPO_CNT 0x00

WTFS CLK

SET START_SCROLL 1

WTFS CLK

SET START_SCROLL 0

WTFS CLK

WAIT 1 us

CHK BUSY 1 OK


// WAIT Until Falling edge of busy output

WTF BUSY 20 ms
CHK BUSY 0 OK

// ==

WTFS CLK

SET DISPLAY_SCREEN_MATRIX 0x01

WTFS CLK
SET DISPLAY_SCREEN_MATRIX 0x00

// ==

END_TEST
